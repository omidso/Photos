function GalleriaDataFromJSON(e){var a=0,t=[];return $.each(e,function(){var e=this,i="<div> Focal Length: "+e.focallength+" mm f/"+e.fstop+"<br>"+"Exposure: "+e.exposure+"s"+"<br>"+"ISO: "+e.iso+"<br>"+"Flash: "+e.flash+"<br>"+"Camera make: "+e.make+"<br>"+"Camera model: "+e.model+"<br></div>";t[a++]={thumb:e.thumburl,image:e.url,big:e.bigurl,title:e.name,description:i,photoid:e.id,albumid:e.album_id}}),t}function GalleriaManageFaces(){$(".galleria-info-faces").click(function(){if("true"==$(this).attr("data-active"))$(this).css("background-color","#000000"),$(this).attr("data-active",!1),$(".facebox").remove();else{$(this).css("background-color","#4b698c"),$(this).attr("data-active",!0);var e=Galleria.get(0),a=e.getData().albumid+":"+e.getData().photoid;$.getJSON("/photo/people.json",{q:a},function(a){if(a.people.length){var t=0;$.each(a.people,function(){var i,o,c,s,r=e.getActiveImage().height,n=e.getActiveImage().width,l=e.getActiveImage().x,h=e.getActiveImage().y;a.orientation<=1||3==a.orientation?(s=n/a.width,c=r/a.height,fw=a.faces[t].width*s,fh=a.faces[t].height*c,a.orientation<=1?(i=parseInt(h+a.faces[t].yloc*s),o=parseInt(l+a.faces[t].xloc*c)):(i=ParseInt(h+(r-(fh+a.faces[t].yloc*c))),o=ParseInt(l+(n-(fw+a.faces[t].xloc*s))))):(2==a.orientation||4==a.orientation)&&(s=n/a.height,c=r/a.width,fw=a.faces[t].height*s,fh=a.faces[t].width*c,2==a.orientation?(i=parseInt(h+a.faces[t].xloc*c),o=parseInt(l+(n-(fw+a.faces[t].yloc*s)))):(i=parseInt(h+(r-(fh+a.faces[t].xloc*c))),o=parseInt(l+a.faces[t].yloc*s)));var f='<a href="/people/'+this.id+'/photos ">'+this.name+"</a>",p='<div class="facebox" style= "width: '+fw+"px; height: "+fh+"px;"+"top: "+i+"px;"+"left: "+o+'px;"'+'><span class= "label" style="position: relative; top:-20px">'+f+"</span></div>";$(".page-container").append(p),t++})}})}})}